<!doctype html>
<!--/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/-->
  <!DOCTYPE html>
  <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sling GraphQL demo website</title>
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    </head>
    <body>
        <h1>Sling GraphQL demo website</h1>

        <div>
          <p>To navigate the content, start at <a href="/articles">/articles</a>.</p>
        </div>
        
        <h2>Under the hood</h2>
        
        <p>
        Some of the links below require <a href="/system/sling/form/login">logging in as admin</a> first 
        (by default that's <em>admin:admin</em>).
        
        <p>
        Taking <a href="/content/articles/music/christine-macgyver-on-the-capacitor-of-primary-libero-dolore-aka-rss.html">
          Christine MacGyver on the capacitor of primary 'libero dolore' (aka RSS)</a>
          as an example:
        
        <ul>
          <li>
              The GraphQL schema is retrieved with an internal Sling request with the 
              <a href="/content/articles/music/christine-macgyver-on-the-capacitor-of-primary-libero-dolore-aka-rss.GQLschema">GQLschema extension</a>
          </li>
          <li>
            The server-side GraphQL query is defined <a href="/apps/samples/article/json.gql">in a json.gql script</a>.
          </li>
          <li>
            Based on that script's name, according to the usual Sling conventions it is used by the <em>Sling GraphQL ScriptEngine</em> to execute
            the query and returns <a href="/content/articles/music/christine-macgyver-on-the-capacitor-of-primary-libero-dolore-aka-rss.json">a simple JSON document</a>
            that provides everything needed to render the page in one request.
            <br/>
            That document includes navigation information (the article categories) and processed
            content like the "seeAlso" links which are fleshed out to include the full path and title of the referenced articles, starting, from the
            article filenames present in the article content. This aggregation happens in the <em>DataFetcher</em> Java classes of the demo bundle.
            <br/>
          </li>
          <li>
            For this demo, the <em>rawjson</em> extension provides 
            <a href="/content/articles/music/christine-macgyver-on-the-capacitor-of-primary-libero-dolore-aka-rss.rawjson">the raw JSON rendering</a>
            of the default Sling GET servlet, for comparison.
          </li>
          <li>
            The rendering currently happens on the client side using a <a href="/apps/samples/article/article.html">Handlebars template</a>. The (tentative)
            plan is to move this server-side for the article renderings, and implement a tags browsing page using GraphQL queries and client-side Handlebars
            rendering to demonstrate using the same query and rendering languages either server- or client-side.
          </li>
        </ul>

        More useful links:
        
        <ul>
          <li>
            <a href="/content/tags/card+panel.json">Tag queries using a custom ResourceResolver + server-side GraphQL queries</a>
            - raw JSON <a href="/content/tags/card+panel.rawjson">here</a>.
            <br/>
            Here's <a href="/content/tags/card+alarm+sensor+firewall+application+panel.json">a query with few results</a>
            and its <a href="/content/tags/card+alarm+sensor+firewall+application+panel.rawjson"">raw JSON</a>.
          </li>
          <li>
            <a href="/graphql.json">GraphQL servlet</a>
          </li>
        </ul>
    </body>
</html>
